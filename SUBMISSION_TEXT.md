# Текст для сдачи домашнего задания

## Ссылка на развернутое в Streamlit Cloud приложение:

https://openweathermap-d5mkmcscpxiqemhpeshyq6.streamlit.app/

## Ссылка на код:

https://github.com/SergeySolovyev/OpenWeatherMap_Project

---

## Комментарии о параллельности/асинхронности:

Все выводы о параллельности и асинхронности описаны в комментариях в коде:

### Параллельность:

**Файл: `analysis.py` (функция `prepare_features`, строки 124-131)**

Используется последовательная обработка данных вместо параллельной. ThreadPoolExecutor не эффективен для CPU-bound задач (rolling, вычисления) из-за GIL. Накладные расходы на создание потоков превышают выгоду от параллелизма. 

**Результаты эксперимента (см. `experiments.ipynb`):**
- Последовательная обработка: ~0.2 секунды
- Параллельная обработка (ThreadPoolExecutor, 8 потоков): ~0.57 секунд
- **Вывод**: Параллелизация через ThreadPoolExecutor замедлила выполнение в ~2.9 раза из-за GIL и накладных расходов

**Файл: `app.py` (строки 58-60)**
```python
# ВЫВОД из экспериментов: для CPU-bound задач (rolling, вычисления) последовательная обработка оптимальна
# ThreadPoolExecutor не эффективен из-за GIL, накладные расходы превышают выгоду
# См. experiments.ipynb для детального анализа
```

### Асинхронность:

**Файл: `weather_api.py` (функция `fetch_current_weather`, строки 35-40)**

Синхронные запросы выполняются последовательно и медленнее async. Для множественных запросов async даёт ускорение в 18-19 раз. Рекомендуется использовать `fetch_current_weather_async` для лучшей производительности.

**Файл: `weather_api.py` (функция `fetch_current_weather_async`, строки 69-73)**

Async даёт ускорение в 18-19 раз для множественных запросов. Для одного запроса async быстрее на ~77%. Рекомендуется использовать async для всех API запросов.

**Файл: `app.py` (строки 66-67, 76-77, 81-82)**

Async используется по умолчанию (toggle включен) для всех API запросов, так как async особенно эффективен для I/O операций и не блокирует интерфейс Streamlit.

**Результаты эксперимента (см. `experiments.ipynb`):**
- Один запрос: async быстрее на ~77% (1.1с vs 0.25с)
- 5 запросов: async даёт ускорение в ~18.8 раз (5.7с vs 0.3с)
- **Вывод**: Async особенно эффективен для I/O-bound операций (запросы к API)

---

## Подробные эксперименты:

Все эксперименты и детальный анализ находятся в файле `experiments.ipynb` в репозитории:
https://github.com/SergeySolovyev/OpenWeatherMap_Project/blob/main/experiments.ipynb

